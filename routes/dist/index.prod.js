"use strict";var express=require("express"),router=express.Router(),taches=require("../models/tache");router.get("/",function(e,r){taches.find({},function(e,t){r.render("todo",{listeTaches:t})})}),router.post("/",function(t,r){var n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.body.content,0!=Number(n))return o=new taches({content:n}),e.prev=3,e.next=6,regeneratorRuntime.awrap(o.save());e.next=15;break;case 6:r.redirect("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),r.redirect("/"),console.log(e.t0);case 13:e.next=16;break;case 15:r.redirect("/");case 16:case"end":return e.stop()}},null,null,[[3,9]])}),router.get("/edit/:id",function(e,r){var n=e.params.id;taches.find({},function(e,t){r.render("todoEdit",{listeTaches:t,idTask:n}),console.log(e)})}).post("/edit/:id",function(e,t){var r=e.params.id;taches.findByIdAndUpdate(r,{content:e.body.content},function(e){if(e)return t.send(500,e);t.redirect("/")})}),router.get("/remove/:id",function(e,t){var r=e.params.id;taches.findByIdAndRemove(r,function(e){if(e)return t.send(500,e);t.redirect("/")})}),module.exports=router;